<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ValoLine - Inicio de sesión</title>
    <link rel="stylesheet" href="stylelogin.css">
</head>
<body>
    <div class="formulario">
        <h1>Iniciar sesión</h1>
        <form method="post" id="loginForm">
            <div class="username">
                <input type="text" id="username" required>
                <label>Nombre de usuario o correo electrónico</label>
            </div>
            <div class="username">
                <input type="password" id="password" required>
                <label>Contraseña</label>
            </div>
            <div class="recordar">¿Olvidaste la contraseña?</div>
            <input type="submit" value="Iniciar sesión">
            <div class="registrarse">
                ¿No tienes una cuenta? <a href="register.html">Regístrate</a>
            </div>
        </form>
    </div>

    <script>
        const form = document.getElementById('loginForm');
        const usersArray = JSON.parse(localStorage.getItem('users')) || [];

        form.addEventListener('submit', function(event) {
            event.preventDefault(); // Evita que el formulario se envíe normalmente

            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Busca el usuario en el array
            const user = usersArray.find(user => user.username === username || user.email === username);
            
            //Si el usuario && contraseña son verdaderos con los datos almacenados en el array
            if (user && user.password === password) {
                // Iniciar sesion exitoso
                alert('Inicio de sesión exitoso');
            } else {
                // Credenciales incorrectas
                alert('Nombre de usuario o contraseña incorrectos, por favor vuelta a intentarlo');
            }

            //El if a ser verdaderp, saldra el mensaje del formulario y lo reedirigira al index
            window.location.href = 'index.html';
        });

    </script>
</body>
</html>
